# プロダクトビジョン

## ミッション

Claude Code の実行状況を音声でリアルタイムにレポートし、開発者が画面を見ずに進捗を把握できるようにする。

## ターゲットユーザー

- Claude Code を日常的に使用する開発者
- マルチタスク環境で Claude Code の進捗を把握したい開発者

### 解決する課題

- Claude Code の実行中、進捗を確認するために画面を注視し続ける必要がある
- 他の作業をしている間に Claude Code の完了や問題発生に気づけない
- ターミナルの文字出力だけでは「今何をしているか」が直感的にわからない

## 主要機能

### transcript .jsonl 監視による音声レポート

- **transcript 監視**: Claude Code の transcript .jsonl ファイルをリアルタイム監視し、Claude の応答・ツール実行を音声で報告する常駐デーモン
- **AskUserQuestion の読み上げ**: Claude が確認プロンプトを提示した際に質問内容を音声再生し、応答待ち状態を通知（「確認待ち: {質問}」形式）
- **ターン完了通知**: Claude のターンが完了した際に「入力待ちです」と音声通知
- **カスタマイズ可能な音声出力コマンド**: デフォルトで macOS `say` を使用し、`speaker.command` で任意の TTS エンジン（espeak, VOICEVOX 等）に変更可能（キュー管理・排他制御付き）。未設定時は `say` → `espeak-ng` → `espeak` の順で自動検出
- **音声言語の自動検出**: `language` 未設定時にシステムロケールから言語コードを自動判定（macOS: `AppleLanguages`、その他: `locale` コマンド・`LANG`/`LC_ALL` 環境変数）
- **長文の中間省略**: 長いメッセージは先頭と末尾を残して中間を省略し、導入と結論を音声で確認可能

### 定期要約通知

- **Ollama ベースの定期要約**: 一定間隔で操作（ツール実行・テキスト応答）を蓄積し、Ollama で自然言語の要約文を生成して音声通知（言語設定に応じて日本語・英語など）
- **イベントが無い期間はスキップ**: 操作がなければ無音

### マルチプロジェクト対応

- **プロジェクト切り替え案内**: 異なるプロジェクトのメッセージに切り替わる際に「プロジェクト {name} の実行内容を再生します」と音声案内
- **同一プロジェクト・セッション優先キュー**: 再生キューにメッセージが溜まっている場合、同一プロジェクト+同一セッションのメッセージを優先して再生し、文脈の一貫性を維持
- **プロジェクトフィルタ**: include/exclude パターンで監視対象プロジェクトを制御

### 設定ファイル

- **XDG 準拠の設定ファイル**: `~/.config/cc-voice-reporter/config.json` で各種設定を管理
- **CLI 引数とのマージ**: CLI 引数が設定ファイルより優先

### 読み上げ対象

- AskUserQuestion の質問内容（「確認待ち: {質問}」形式）
- ターン完了通知（「入力待ちです」）
- 定期要約（Ollama による操作サマリー）

## 差別化ポイント

- **AI 要約による音声レポート**: Ollama で操作を要約し、状況を言葉で説明
- **ローカル完結**: 設定可能な TTS コマンド（デフォルト: macOS say）+ Ollama で外部クラウド API 不要
- **TypeScript**: 型安全な実装で保守性が高い
